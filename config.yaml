edge:
  agent_id: "sage1"  # Human-friendly identifier for this device
  user_phone: "+13238407486"    # Mac mini iMessage account

backend:
  url: "https://archety-backend-dev.up.railway.app"
  websocket_url: "wss://archety-backend-dev.up.railway.app"  # WebSocket URL (derived from url if not set)
  sync_interval_seconds: 30  # Fallback polling interval if WebSocket disconnects

websocket:
  enabled: true  # Use WebSocket for real-time command delivery
  reconnect_attempts: 10  # DEPRECATED: WebSocket now retries indefinitely (unlimited attempts)
  ping_interval_seconds: 30  # Keepalive ping frequency

imessage:
  poll_interval_seconds: 1  # Quick Win: Faster detection (0-1s vs 0-2s)
  db_path: "/Users/sage1/Library/Messages/chat.db"
  attachments_path: "/Users/sage1/Library/Messages/Attachments"
  transport_mode: "native_helper"  # native_helper or applescript
  bridge_executable: "./native/messages-helper/.build/release/messages-helper"
  bridge_args: []

database:
  path: "./edge-agent.db"
  state_path: "./data/edge-state.db"

scheduler:
  adaptive_mode: true  # Phase 3: Adaptive scheduling for near-instant delivery
  check_interval_seconds: 30  # Fallback interval (used when adaptive_mode is false)

logging:
  level: "debug"  # debug, info, warn, error
  file: "./edge-agent.log"

monitoring:
  sentry:
    enabled: false  # Set to true and add DSN to enable error tracking
    # dsn: "https://your-sentry-dsn@sentry.io/project-id"
    environment: "development"
    traces_sample_rate: 0.1  # 10% of transactions for performance monitoring
    profiles_sample_rate: 0.1  # 10% profiling
  amplitude:
    enabled: true  # Set to true and add API key to enable analytics
    api_key: "${AMPLITUDE_API_KEY}"  # Set via environment variable
    flush_interval_ms: 10000  # Flush events every 10 seconds
  health_check:
    enabled: true  # Enable health check endpoint
    port: 3001  # Health check HTTP server port

security:
  keychain_service: "com.archety.edge"
  keychain_account: "edge-state"
